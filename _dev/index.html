<!doctype html>
<title>Colorly - A Massive Color Library for Sass, Stylus, and LESS</title>
<link href="demo.css" rel="stylesheet">
<meta name="viewport" content="width=device-width">

<div class="book-list">
	<ul>
		<li><a class="book-usage-toggle">Show/Hide Usage</a></li>
		{{colors}}
	</ul>
</div>

<div class="book-usage">
	<div class="half">
		<h4>Sass & Stylus Usage</h4>
		<code><span class="function quiet">[book-name]</span>( <span class="selected-color quiet">[color]</span> )</code>
	</div>
	<div class="half">
		<h4>LESS Usage</h4>
		<code>@<span class="function quiet">[book-name]</span>-<span class="selected-color quiet">[color]</span></code>
	</div>
</div>

<div class="book-viewer">
	
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>

var usage = $( '.book-usage' );
var body = $( 'body' );

var toggle_usage = function(){
	if ( !usage.hasClass( 'visible' ) ) {
		show_usage();
	} else {
		hide_usage();
	}
};

var show_usage = function(){
	console.log( 'toggling it' );
	if ( !usage.hasClass( 'visible' ) ) {
		usage.addClass( 'visible' );
		body.addClass( 'with-usage' );
	}
};

var hide_usage = function(){
	if ( usage.hasClass( 'visible' ) ) {
		usage.removeClass( 'visible' );
		body.removeClass( 'with-usage' );
	}
};

$(function(){

	// ajaxy stuffs go here.
	$( '.book-list a' ).click(function(){

		var book = $( this ).attr( 'rel' );

		if ( typeof book !== 'undefined' ) {
			$( '.book-viewer' ).load( 'book/'+book+'.html', function(){
				$( '.function' ).html( book ).removeClass( 'quiet' );
				
				$( '.book-viewer .swatch' ).click(function(){
					$( '.selected-color' ).html( $(this).html() ).removeClass( 'quiet' );
					show_usage();
				});
			});
		}


	});

	$( '.book-usage-toggle' ).click( toggle_usage );

});

</script>